<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" rdbms">
<title>Getting data out | Data Management</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-custom.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="data-management" href="http://localhost:4000/feed.xml">

<script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Data Management</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/vda-lab/data-management" target="_blank" rel="noopener">GitHub</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="rdbms_landing_page.html">Relational databases and SQL</a></li>
                        
                        
                        
                        <li><a href="nosql_landing_page.html">NoSQL</a></li>
                        
                        
                        
                        <li><a href="lambda_landing_page.html">Lambda architecture</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Getting data out">{title}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Relational databases and SQL </li>
  
  
  
      
  
  <li>
      <a title="Data collection" href="#">Data collection</a>
      <ul>
          
          
          
          <li><a title="Clinical trials" href="rdbms-clinical-trials.html">Clinical trials</a></li>
          
          
          
          
          
          
          <li><a title="Epidemiological studies" href="rdbms-epidemiological-studies.html">Epidemiological studies</a></li>
          
          
          
          
          
          
          <li><a title="DNA sequencing and genotyping" href="rdbms-dna-sequencing-and-genotyping.html">DNA sequencing and genotyping</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Relational databases" href="#">Relational databases</a>
      <ul>
          
          
          
          <li><a title="Introduction" href="rdbms-intro.html">Introduction</a></li>
          
          
          
          
          
          
          <li><a title="SQLite" href="rdbms-sqlite.html">SQLite</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Database schema normalisation" href="#">Database schema normalisation</a>
      <ul>
          
          
          
          <li><a title="Database schema" href="rdbms-database-schema.html">Database schema</a></li>
          
          
          
          
          
          
          <li><a title="A student database" href="rdbms-a-student-database.html">A student database</a></li>
          
          
          
          
          
          
          <li><a title="A genotype database" href="rdbms-a-genotype-database.html">A genotype database</a></li>
          
          
          
          
          
          
          <li><a title="Normal forms" href="rdbms-normal-forms.html">Normal forms</a></li>
          
          
          
          
          
          
          <li><a title="Types of relationships" href="rdbms-types-of-relationships.html">Types of relationships</a></li>
          
          
          
          
          
          
          <li><a title="Other best practices" href="rdbms-other-best-practices.html">Other best practices</a></li>
          
          
          
          
          
          
          <li><a title="Referential integrity" href="rdbms-referential-integrity.html">Referential integrity</a></li>
          
          
          
          
          
          
          <li><a title="Indices" href="rdbms-indices.html">Indices</a></li>
          
          
          
          
          
          
          <li><a title="Conclusion - key concepts" href="rdbms-conclusion-key-concepts.html">Conclusion - key concepts</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="SQL - Structured Query Language" href="#">SQL - Structured Query Language</a>
      <ul>
          
          
          
          <li><a title="Getting data in" href="rdbms-getting-data-in.html">Getting data in</a></li>
          
          
          
          
          
          
          <li class="active"><a title="Getting data out" href="rdbms-getting-data-out.html">Getting data out</a></li>
          
          
          
          
          
          
          <li><a title="Updating and deleting data" href="rdbms-updating-and-deleting-data.html">Updating and deleting data</a></li>
          
          
          
          
          
          
          <li><a title="Additional functions" href="rdbms-additional-functions.html">Additional functions</a></li>
          
          
          
          
          
          
          <li><a title="Public bioinformatics databases" href="rdbms-public-bioinformatics-databases.html">Public bioinformatics databases</a></li>
          
          
          
          
          
          
          <li><a title="Views" href="rdbms-views.html">Views</a></li>
          
          
          
          
          
          
          <li><a title="Normalisation homework" href="rdbms-normalisation-homework.html">Normalisation homework</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Drawbacks of relational databases" href="#">Drawbacks of relational databases</a>
      <ul>
          
          
          
          <li><a title="Drawbacks of relational databases" href="rdbms-drawbacks-of-rdbms.html">Drawbacks of relational databases</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block: -->
         <!-- <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p> -->

</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Getting data out</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

   <p>It may seem counter-intuitive to first break down the data into multiple tables using the normal forms as described above, in order to having to combine them afterwards again in a SQL query. The reason for this is simple: it allows you to ask the data any question much more easily, instead of being restricted to the format of the original data.</p>

<p><img src="/assets/normalisation-queries.png" width="600px" /></p>

<h2 id="queries">Queries</h2>

<p>Why do we need queries? Because natural languages (e.g. English) are too vague: with complex questions, it can be hard to verify that the question
was interpreted correctly, and that the answer we received is truly
correct. The Structured Query Language (SQL) is a standardised system so that users and developers can learn one method that works on (almost) any system.</p>

<p>In order to write your queries, you’ll need to know what the database looks like. A <em>relationship diagram</em> including tables, columns and relations is very helpful here. See for example this relationship diagram for a pet store.</p>

<p><img src="/assets/relationship-diagram.png" width="600px" /></p>

<p>Questions that we can ask the database include:</p>
<ul>
  <li>Which animals were born after August 1?</li>
  <li>List the animals by category and breed.</li>
  <li>List the categories of animals that are in the Animal list.</li>
  <li>Which dogs have a donation value greater than $250?</li>
  <li>Which cats have black in their color?</li>
  <li>List cats excluding those that are registered or have red in their color.</li>
  <li>List all dogs who are male and registered or who were born before 01-June-2010 and have white in their color.</li>
  <li>What is the extended value (price * quantity) for sale items on sale 24?</li>
  <li>What is the average donation value for animals?</li>
  <li>What is the total value of order number 22?</li>
  <li>How many animals were adopted in each category?</li>
  <li>How many animals were adopted in each category with total adoptions of more than 10?</li>
  <li>How many animals born after June 1 were adopted in each category with total adoptions more than 10?</li>
  <li>List the CustomerID of everyone who bought or adopted something between April 1, 2010 and May 31, 2010.</li>
  <li>List the names of everyone who bought or adopted something between April 1, 2010 and May 31, 2010.</li>
  <li>List the name and phone number of anyone who adopted a registered white cat between two given dates.</li>
</ul>

<p>Similarly, we already drew the relationship diagram for the genotypes.</p>

<p><img src="/assets/primary_foreign_keys.png" alt="primary and foreign keys" /></p>

<p>Questions that we can ask:</p>
<ul>
  <li>What is the number of individuals for each ethnicity?</li>
  <li>How many SNPs are there per chromosome?</li>
  <li>Approximately how long is chromosome 22 (by looking at the maximum SNP position)?</li>
  <li>What are the most/least common genotypes?</li>
  <li>…</li>
</ul>

<h3 id="single-tables">Single tables</h3>

<p>It is very simple to query a single table. The <strong>basic syntax</strong> is:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">&lt;</span><span class="n">column_name1</span><span class="p">,</span> <span class="n">column_name2</span><span class="o">&gt;</span> <span class="k">FROM</span> <span class="o">&lt;</span><span class="k">table_name</span><span class="o">&gt;</span> <span class="k">WHERE</span> <span class="o">&lt;</span><span class="n">conditions</span><span class="o">&gt;</span><span class="p">;</span></code></pre></figure>

<p>If you want to see <strong>all columns</strong>, you can use “*” instead of a list of column names, and you can leave out the WHERE clause. The <strong>simplest query</strong> is therefore <code class="highlighter-rouge">SELECT * FROM &lt;table_name&gt;;</code>. So <strong>the <code class="highlighter-rouge">&lt;column_name1, column_name2&gt;</code>  slices the table vertically while the WHERE clause slices it horizontally</strong>.</p>

<p>Data can be filtered using a <code class="highlighter-rouge">WHERE</code> clause. For example:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="o">=</span> <span class="s1">'african'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="o">=</span> <span class="s1">'african'</span> <span class="k">OR</span> <span class="n">ethnicity</span> <span class="o">=</span> <span class="s1">'caucasian'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">'african'</span><span class="p">,</span> <span class="s1">'caucasian'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="o">!=</span> <span class="s1">'asian'</span><span class="p">;</span></code></pre></figure>

<p>What if you can’t remember if the ethnicity was stored capitalised or not? In other words: was it ‘caucasian’ or ‘Caucasian’? One way of approaching this is using the <strong><code class="highlighter-rouge">LIKE</code></strong> keyword. It behaves the same as <code class="highlighter-rouge">==</code>, but you can use wildcards (i.c. <code class="highlighter-rouge">%</code>) that can represent any character. For example, the following two are almost the same:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="o">==</span> <span class="s1">'Caucasian'</span> <span class="k">OR</span> <span class="n">ethnicity</span> <span class="o">==</span> <span class="s1">'caucasian'</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROm</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="k">LIKE</span> <span class="s1">'%aucasian'</span><span class="p">;</span></code></pre></figure>

<p>I say “almost” the same, because the <code class="highlighter-rouge">%</code> can stand for more than one character. A <code class="highlighter-rouge">WHERE ethnicity LIKE '%sian'</code> would therefore return those individuals who are “Caucasian”, “caucasian”, “Asian” and “asian”.</p>

<p>You often just want to see a <strong>small subset of data</strong> just to make sure that you’re looking at the right thing. In that case: add a <code class="highlighter-rouge">LIMIT</code> clause to the end of your query, which has the same effect as using <code class="highlighter-rouge">head</code> on the linux command-line. Please <em>always</em> do this if you don’t know what your table looks like because you don’t want to send millions of lines to your screen.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="o">=</span> <span class="s1">'caucasian'</span> <span class="k">LIMIT</span> <span class="mi">1</span><span class="p">;</span></code></pre></figure>

<p>If you just want know the <strong>number of records</strong> that would match your query, use <code class="highlighter-rouge">COUNT(*)</code>:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">individuals</span> <span class="k">WHERE</span> <span class="n">ethnicity</span> <span class="o">=</span> <span class="s1">'african'</span><span class="p">;</span></code></pre></figure>

<p>Using the <code class="highlighter-rouge">GROUP BY</code> clause you can <strong>aggregate</strong> data. For example:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">ethnicity</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">individuals</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">ethnicity</span><span class="p">;</span></code></pre></figure>

<h5 id="combining-tables">Combining tables</h5>

<p>In the second normal form we separated several aspects of the data in different tables. Ultimately, we want to combine that information of course. This is where the primary and foreign keys come in. Suppose you want to list all different SNPs, with the alleles that have been found in the population:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">individual_id</span><span class="p">,</span> <span class="n">snp_id</span><span class="p">,</span> <span class="n">genotype_amb</span> <span class="k">FROM</span> <span class="n">genotypes</span><span class="p">;</span></code></pre></figure>

<p>This isn’t very informative, because we get the uninformative numbers for SNPs instead of SNP accession numbers. To run a query across tables, we have to call both tables in the FROM clause:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">individuals</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">snps</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">genotype_amb</span> <span class="k">FROM</span> <span class="n">individuals</span><span class="p">,</span> <span class="n">snps</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">;</span></code></pre></figure>

<table>
  <thead>
    <tr>
      <th style="text-align: left">name</th>
      <th style="text-align: left">accession</th>
      <th style="text-align: left">genotype_amb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
  </tbody>
</table>

<p>Wait… This can’t be correct: we get 36 rows back instead of the 6 that we expected. This is because <em>all</em> combinations are made between <em>all</em> rows of each table. We have to put some constraints on the rows that are returned.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">individuals</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">snps</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">genotype_amb</span>
<span class="k">FROM</span> <span class="n">individuals</span><span class="p">,</span> <span class="n">snps</span><span class="p">,</span> <span class="n">genotypes</span>
<span class="k">WHERE</span> <span class="n">individuals</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">individual_id</span>
<span class="k">AND</span> <span class="n">snps</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">snp_id</span><span class="p">;</span></code></pre></figure>

<table>
  <thead>
    <tr>
      <th style="text-align: left">name</th>
      <th style="text-align: left">accession</th>
      <th style="text-align: left">genotype_amb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_A</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">individual_B</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
  </tbody>
</table>

<p>What happens here?</p>

<ul>
  <li>The individuals, snps and genotypes tables are referenced in the FROM clause.</li>
  <li>In the SELECT clause, we tell the query what columns to return. We <strong>prepend the column names with the table name</strong>, to know what column we actually mean (snps.id is a different column from individuals.id).</li>
  <li><strong>In the WHERE clause, we actually provide the link between the tables</strong>: the value for snp_id in the genotypes table should correspond with the id column in the snps table. This is the part that solves the above issue of returning all those nonsense rows. Imagine that we’d ask the id’s themselves as well, then we’d get the list below. From that list, we can then filter the rows that adhere to the constraints we set.</li>
</ul>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">individuals</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">individual_id</span><span class="p">,</span> <span class="n">snps</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">snp_id</span><span class="p">,</span> <span class="n">individuals</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">snps</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">.</span><span class="n">genotype_amb</span>
<span class="k">FROM</span> <span class="n">individuals</span><span class="p">,</span> <span class="n">snps</span><span class="p">,</span> <span class="n">genotypes</span><span class="p">;</span></code></pre></figure>

<table>
  <thead>
    <tr>
      <th style="text-align: left">individual.id</th>
      <th style="text-align: left">genotypes.individual_id</th>
      <th style="text-align: left">snps.id</th>
      <th style="text-align: left">genotypes.snp_id</th>
      <th style="text-align: left">name</th>
      <th style="text-align: left">accession</th>
      <th style="text-align: left">genotype_amb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>individual_A</strong></td>
      <td style="text-align: left"><strong>rs12345</strong></td>
      <td style="text-align: left"><strong>A</strong></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>R</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>K</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>M</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>G</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>G</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs98765</em></td>
      <td style="text-align: left"><em>A</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>2</strong></td>
      <td style="text-align: left"><strong>2</strong></td>
      <td style="text-align: left"><strong>individual_A</strong></td>
      <td style="text-align: left"><strong>rs98765</strong></td>
      <td style="text-align: left"><strong>R</strong></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs98765</em></td>
      <td style="text-align: left"><em>K</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs98765</em></td>
      <td style="text-align: left"><em>M</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>2</em></td>
      <td style="text-align: left"><em>2</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs98765</em></td>
      <td style="text-align: left"><em>G</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs98765</em></td>
      <td style="text-align: left"><em>G</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs28465</em></td>
      <td style="text-align: left"><em>A</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs28465</em></td>
      <td style="text-align: left"><em>R</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>3</strong></td>
      <td style="text-align: left"><strong>3</strong></td>
      <td style="text-align: left"><strong>individual_A</strong></td>
      <td style="text-align: left"><strong>rs28465</strong></td>
      <td style="text-align: left"><strong>K</strong></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs28465</em></td>
      <td style="text-align: left"><em>M</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs28465</em></td>
      <td style="text-align: left"><em>G</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>3</em></td>
      <td style="text-align: left"><em>3</em></td>
      <td style="text-align: left"><em>individual_A</em></td>
      <td style="text-align: left"><em>rs28465</em></td>
      <td style="text-align: left"><em>G</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>1</em></td>
      <td style="text-align: left"><em>individual_B</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>A</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>individual_B</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>R</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><em>-2-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-1-</em></td>
      <td style="text-align: left"><em>-3-</em></td>
      <td style="text-align: left"><em>individual_B</em></td>
      <td style="text-align: left"><em>rs12345</em></td>
      <td style="text-align: left"><em>K</em></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>2</strong></td>
      <td style="text-align: left"><strong>2</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>1</strong></td>
      <td style="text-align: left"><strong>individual_B</strong></td>
      <td style="text-align: left"><strong>rs12345</strong></td>
      <td style="text-align: left"><strong>M</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">…</td>
      <td style="text-align: left">…</td>
      <td style="text-align: left">…</td>
      <td style="text-align: left">…</td>
      <td style="text-align: left">…</td>
      <td style="text-align: left">…</td>
      <td style="text-align: left">…</td>
    </tr>
  </tbody>
</table>

<p>Having to type the table names in front of the column names can become tiresome. We can however create <strong>aliases</strong> like this:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">i</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span>
<span class="k">FROM</span> <span class="n">individuals</span> <span class="n">i</span><span class="p">,</span> <span class="n">snps</span> <span class="n">s</span><span class="p">,</span> <span class="n">genotypes</span> <span class="k">g</span>
<span class="k">WHERE</span> <span class="n">i</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">individual_id</span>
<span class="k">AND</span> <span class="n">s</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">snp_id</span><span class="p">;</span></code></pre></figure>

<h3 id="join">JOIN</h3>

<p>Sometimes, though, we have to join tables in a different way. Suppose that our snps table contains SNPs that are nowhere mentioned in the genotypes table, but we still want to have them mentioned in our output:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">snps</span> <span class="p">(</span><span class="n">accession</span><span class="p">,</span> <span class="n">chromosome</span><span class="p">,</span> <span class="k">position</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="s1">'rs11223'</span><span class="p">,</span><span class="s1">'2'</span><span class="p">,</span><span class="mi">11223</span><span class="p">);</span></code></pre></figure>

<p>If we run the following query:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">chromosome</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="k">position</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span>
<span class="k">FROM</span> <span class="n">snps</span> <span class="n">s</span><span class="p">,</span> <span class="n">genotypes</span> <span class="k">g</span>
<span class="k">WHERE</span> <span class="n">s</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">snp_id</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span><span class="p">;</span></code></pre></figure>

<p>We get the following output:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">chromosome</th>
      <th style="text-align: left">position</th>
      <th style="text-align: left">accession</th>
      <th style="text-align: left">genotype_amb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">12345</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">12345</td>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">98765</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">1</td>
      <td style="text-align: left">98765</td>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">R</td>
    </tr>
    <tr>
      <td style="text-align: left">5</td>
      <td style="text-align: left">28465</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">5</td>
      <td style="text-align: left">28465</td>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">K</td>
    </tr>
  </tbody>
</table>

<p>But we actually want to have rs11223 in the list as well. Using this approach, we can’t because of the <code class="highlighter-rouge">WHERE s.id = g.snp_id</code> clause. The solution to this is to use an <strong>explicit join</strong>. To make things complicated, there are several types: inner and outer joins. In principle, an inner join gives the result of the intersect between two tables, while an outer join gives the results of the union. What we’ve been doing up to now is look at the intersection, so the approach we used above is equivalent to an inner join:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span>
<span class="k">FROM</span> <span class="n">snps</span> <span class="n">s</span> <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">genotypes</span> <span class="k">g</span> <span class="k">ON</span> <span class="n">s</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">snp_id</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span><span class="p">;</span></code></pre></figure>

<p>gives:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">accession</th>
      <th style="text-align: left">genotype_amb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">R</td>
    </tr>
  </tbody>
</table>

<p>A <strong>left outer join</strong> returns all records from the left table, and will include any matches from the right table:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span>
<span class="k">FROM</span> <span class="n">snps</span> <span class="n">s</span> <span class="k">LEFT</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="n">genotypes</span> <span class="k">g</span> <span class="k">ON</span> <span class="n">s</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">snp_id</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">s</span><span class="p">.</span><span class="n">accession</span><span class="p">,</span> <span class="k">g</span><span class="p">.</span><span class="n">genotype_amb</span><span class="p">;</span></code></pre></figure>

<p>gives:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">accession</th>
      <th style="text-align: left">genotype_amb</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">rs11223</td>
      <td style="text-align: left"> </td>
    </tr>
    <tr>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">A</td>
    </tr>
    <tr>
      <td style="text-align: left">rs12345</td>
      <td style="text-align: left">M</td>
    </tr>
    <tr>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">rs28465</td>
      <td style="text-align: left">K</td>
    </tr>
    <tr>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">G</td>
    </tr>
    <tr>
      <td style="text-align: left">rs98765</td>
      <td style="text-align: left">R</td>
    </tr>
  </tbody>
</table>

<p>(Notice the extra line for rs11223!)</p>

<p>A full outer join, finally, return all rows from the left table, and all rows from the right table, matching any rows that should be.</p>

<h2 id="export-to-file">Export to file</h2>

<p>Often you will want to export the output you get from an SQL-query to a file (e.g. CSV) on your operating system so that you can use that data for external analysis in R or for visualisation. This is easy to do. Suppose that we want to export the first 5 lines of the snps table into a file called <code class="highlighter-rouge">5_snps.csv</code>.</p>

<h3 id="using-db-browser">Using DB Browser</h3>
<p>There’s a button for that…</p>

<p><img src="/assets/dbbrowser_4.png" alt="db browser export" /></p>

<h3 id="on-the-command-line">On the command line</h3>
<p>You do that like this:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="p">.</span><span class="n">header</span> <span class="k">on</span>
<span class="p">.</span><span class="k">mode</span> <span class="n">csv</span>
<span class="p">.</span><span class="n">once</span> <span class="mi">5</span><span class="n">_snps</span><span class="p">.</span><span class="n">csv</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">snps</span> <span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span></code></pre></figure>

<p>If you now exit the sqlite prompt (with <code class="highlighter-rouge">.quit</code>), you should see a file in the directory where you were that is called <code class="highlighter-rouge">5_snps.csv</code>.</p>

<div class="seriesContext">
    <a>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <a href="rdbms-updating-and-deleting-data.html"><button type="button" class="btn btn-primary">Next: Updating and deleting data</button></a>
        
    </a>
</div>



    <div class="tags">
        
    </div>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2020 Visual Data Analysis Lab. All rights reserved. <br />
 Site last generated: Jan 20, 2020 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
